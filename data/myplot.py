import matplotlib.pyplot as plt

duplication_rate = 0.3

#去重
test_accuracy_record_after = [11.33, 20.0, 18.04, 12.37, 25.71, 8.93, 28.51, 37.98, 33.19, 45.55, 35.14, 55.89, 52.56, 60.92, 55.04, 64.01, 62.09, 66.45, 62.37, 73.67, 78.08, 78.49, 76.2, 83.45, 80.51, 85.65, 83.29, 86.87, 84.97, 87.5, 86.27, 88.25, 87.6, 88.58, 88.0, 89.31, 89.34, 89.46, 90.11, 90.49, 90.74, 91.12, 91.09, 91.48, 91.56, 91.98, 91.83, 92.06, 92.43, 92.69, 92.45, 92.92, 92.92, 92.88, 92.65, 92.97, 93.15, 93.4, 93.41, 93.23, 93.59, 93.81, 93.91, 94.01, 94.01, 94.14, 94.31, 94.29, 94.43, 94.47, 94.52, 94.61, 94.72, 94.56, 94.71, 94.68, 94.82, 94.88, 94.9, 95.01, 94.86, 95.25, 94.96, 95.32, 95.07, 95.29, 94.99, 95.43, 95.44, 95.45, 95.55, 95.66, 95.5, 95.73, 95.64, 95.6, 95.72, 95.75, 95.96, 95.81]
test_loss_record_after = [2.3170086570739747, 2.3097439331054685, 2.273685721206665, 2.2538019123077393, 2.236927310180664, 2.195199084472656, 2.1449362590789796, 2.0841061004638672, 2.0144969417572023, 1.894956567955017, 1.843966858100891, 1.6900195152282715, 1.4031390295028687, 1.376489903831482, 1.3137611156463622, 1.1573484512329102, 1.1011238425254821, 1.0140120513916016, 1.038212835407257, 0.8347514393806458, 0.7441762435913086, 0.7862958924293518, 0.6916276275157929, 0.6260798953533172, 0.6043547804355621, 0.5416738019943237, 0.5339431193351746, 0.4958683454990387, 0.49024558341503144, 0.448103609418869, 0.4497719892024994, 0.4151179576635361, 0.4079613039493561, 0.3853383430480957, 0.388872109246254, 0.3583565192937851, 0.3537990738272667, 0.3422320615172386, 0.3346705096364021, 0.3194824580669403, 0.31089823195934296, 0.29838658766746523, 0.295598617875576, 0.28626883982419965, 0.27824543817043307, 0.2705899572908878, 0.27042262116670607, 0.2634894815981388, 0.253039724868536, 0.24672731753587723, 0.24746597461104394, 0.23563648979067803, 0.23252913883328438, 0.22941602261662483, 0.24132957271933556, 0.22606570068597795, 0.2199126788675785, 0.2145248121112585, 0.21102005704343318, 0.214296608376503, 0.20417517904937268, 0.19997943396866322, 0.19754717553555964, 0.19456202796399594, 0.19177943150997162, 0.1909810304582119, 0.18549479325413704, 0.1851235038906336, 0.18094077732264996, 0.1761918334722519, 0.1743615554213524, 0.17336819375306367, 0.1699029122814536, 0.17118021174967288, 0.16765861315727235, 0.16694365337640046, 0.16406416136920451, 0.1621017493546009, 0.16052806589603424, 0.15673450316786766, 0.16112865496575832, 0.1514567103520036, 0.15574351850897072, 0.1493576077595353, 0.15301220185384154, 0.14986958500891923, 0.15417234424948692, 0.144979406298697, 0.14306855934411286, 0.14313247263357043, 0.14053176123127342, 0.13750797803923487, 0.13833117178231477, 0.13709580645486713, 0.13634445089399816, 0.13421590341180564, 0.1330029843889177, 0.13183083435744047, 0.12964652779251337, 0.13006851190105082]
training_time_after = [5.147024869918823, 5.063748121261597, 2.5554213523864746, 2.4688940048217773, 2.50807785987854, 2.481369972229004, 2.5037758350372314, 2.513389825820923, 2.6126184463500977, 2.6144635677337646, 2.560603380203247, 2.582883358001709, 2.640308380126953, 2.5332188606262207, 2.5487911701202393, 2.5739657878875732, 2.6336941719055176, 2.6157925128936768, 2.577798366546631, 2.5845935344696045, 2.568777084350586, 2.5962202548980713, 2.5980782508850098, 2.6097137928009033, 2.5838403701782227, 2.611039638519287, 2.6382949352264404, 2.5846853256225586, 2.564117193222046, 2.615278720855713, 2.5939810276031494, 2.581482410430908, 2.574207305908203, 2.5900378227233887, 2.6547939777374268, 2.598264217376709, 2.692294120788574, 2.555283308029175, 2.6124134063720703, 2.577303647994995, 2.5192711353302, 2.5179641246795654, 2.464414119720459, 2.542393922805786, 2.505690813064575, 2.558635711669922, 2.5067765712738037, 2.4911928176879883, 2.5140764713287354, 2.504096269607544, 2.5287857055664062, 2.5064868927001953, 2.541109800338745, 2.5096237659454346, 2.5053224563598633, 2.5412514209747314, 2.5434951782226562, 2.514119863510132, 2.523120403289795, 2.583662986755371, 2.5173184871673584, 2.5522258281707764, 2.5790696144104004, 2.5458080768585205, 2.5412888526916504, 2.609769344329834, 2.547739267349243, 2.5434372425079346, 2.5475471019744873, 2.5854363441467285, 2.5414814949035645, 2.5544097423553467, 2.5820870399475098, 2.572688102722168, 2.5878615379333496, 2.5727689266204834, 2.5582213401794434, 2.5633065700531006, 2.567934036254883, 2.6005587577819824, 2.573115110397339, 2.631495952606201, 2.6009321212768555, 2.5525810718536377, 2.6120786666870117, 2.538917303085327, 2.6591577529907227, 2.579009771347046, 2.6698648929595947, 2.530768871307373, 2.542733669281006, 2.4779748916625977, 2.543377637863159, 2.5303244590759277, 2.51356840133667, 2.5101728439331055, 2.541032552719116, 2.4889767169952393, 2.4725799560546875, 2.484689712524414]
cpu_usage_after = [38.3375, 39.23125, 16.38125, 19.4625, 25.3875, 23.66875, 22.1875, 17.19375, 17.63125, 18.1125, 22.18125, 26.48125, 23.59375, 25.30625, 28.14375, 27.33125, 28.1375, 28.1125, 28.18125, 30.19375, 27.40625, 27.74375, 30.00625, 30.05625, 28.14375, 27.1375, 25.5875, 31.4, 29.53125, 26.04375, 26.2875, 23.2125, 26.51875, 26.5125, 31.28125, 30.58125, 25.03125, 27.40625, 25.78125, 19.85, 21.8125, 23.725, 26.0625, 32.55, 31.8375, 31.75, 31.6375, 30.78125, 32.775, 30.7, 32.79375, 32.2625, 33.85625, 32.4625, 33.49375, 34.6125, 33.89375, 33.11875, 34.46875, 35.5, 33.275, 33.125, 33.14375, 35.2375, 34.93125, 34.275, 33.86875, 34.775, 33.35625, 33.90625, 33.24375, 34.58125, 32.0, 31.675, 33.20625, 33.75, 31.975, 31.09375, 26.44375, 25.7625, 25.40625, 22.95625, 31.85625, 24.76875, 23.91875, 19.51875, 18.2, 18.6375, 33.73125, 33.59375, 28.6125, 31.0125, 32.0125, 29.16875, 30.74375, 29.88125, 29.525, 31.56875, 33.61875, 32.69375]
memory_usage_after = [988.89453125, 995.93359375, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.01953125, 996.03125, 996.04296875, 995.984375, 995.984375, 995.984375, 995.984375, 995.984375, 995.984375, 995.984375, 995.984375, 995.984375, 995.984375, 996.171875, 996.34375, 996.34375, 996.34375, 996.34375, 996.34375, 996.34375, 996.34375, 996.34375, 994.06640625, 994.10546875, 994.10546875, 994.10546875, 994.10546875, 994.109375, 994.109375, 994.109375, 994.109375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.09375, 994.078125, 994.15625, 994.15625, 994.15625, 994.15625, 994.15625, 994.15625, 994.15625, 994.15625, 994.15625, 994.15625, 994.15625, 994.15625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625, 994.16015625]

#不去重
test_accuracy_record_before = [9.78, 11.91, 21.2, 27.8, 24.17, 35.55, 34.59, 30.35, 40.39, 37.35, 29.74, 43.06, 43.98, 46.77, 51.54, 51.76, 67.11, 70.8, 77.85, 78.59, 84.6, 84.84, 86.41, 87.78, 88.02, 89.36, 89.35, 90.21, 90.53, 91.03, 91.45, 91.54, 92.17, 92.02, 92.85, 92.76, 92.89, 93.53, 93.47, 93.67, 93.92, 93.88, 94.07, 94.21, 94.33, 94.47, 94.57, 94.01, 94.77, 94.93, 94.98, 95.02, 95.15, 95.21, 95.16, 95.24, 95.28, 95.41, 95.56, 95.34, 95.59, 95.66, 95.72, 95.72, 95.78, 95.77, 95.88, 95.87, 95.81, 95.93, 95.99, 95.99, 96.06, 96.06, 95.99, 96.23, 96.27, 96.34, 96.27, 96.15, 96.42, 96.51, 96.48, 96.47, 96.54, 96.51, 96.58, 96.61, 96.56, 96.36, 96.75, 96.81, 96.77, 96.77, 96.89, 96.88, 96.02, 96.79, 96.85, 96.83]
test_loss_record_before = [2.3094820964813234, 2.305188523864746, 2.288713095474243, 2.2613848037719726, 2.2269487453460695, 2.2002678169250487, 2.1664864513397215, 2.072387071990967, 1.9979358573913575, 1.9231461568832398, 1.9300762088775634, 1.8392062685012818, 1.6410703523635863, 1.5912926525115967, 1.4055684579849244, 1.3957619234085084, 1.1142570001602172, 0.9728910165786743, 0.8969855237960815, 0.7541839301109314, 0.6882432698249817, 0.6073335345745087, 0.569790542602539, 0.48298673195838926, 0.4744772252559662, 0.41007702488899234, 0.4080700654745102, 0.363467556977272, 0.3427584271669388, 0.3323729615449905, 0.30949046100378036, 0.3006910336613655, 0.2820263824224472, 0.27949996151924134, 0.26071186946630476, 0.2539668163776398, 0.24644943746328354, 0.23595371393561362, 0.22836536102294921, 0.22197629988789558, 0.21399865040183066, 0.21031258194446564, 0.20435337885022165, 0.19881103724241256, 0.1934565932571888, 0.18975955969691277, 0.18530312960147857, 0.19960373991727828, 0.1807251987874508, 0.17573286809623243, 0.17144279078543187, 0.16822211102545262, 0.16584067411124706, 0.16347443888485433, 0.16019443509727715, 0.1584458224505186, 0.15582498090714217, 0.15319676859676837, 0.15212384564876558, 0.1511730219334364, 0.14577439014166593, 0.14341536968052387, 0.14297028784900903, 0.14254370009154083, 0.1404687320947647, 0.13868536040335894, 0.13557486621439457, 0.13492654143571853, 0.1336245232068002, 0.13033359774425626, 0.12973274737447502, 0.1281454218223691, 0.12647999572977422, 0.12660658796727658, 0.13059366262331604, 0.1230182188808918, 0.12130861711055041, 0.12101017919033766, 0.12008513242378831, 0.1249089108645916, 0.11864196268469095, 0.11639172924980522, 0.11457835476398467, 0.11391329127550125, 0.11302337870523334, 0.11237053203433751, 0.11021912444010377, 0.11037148023098707, 0.11094204457625746, 0.11859254066050053, 0.10948054366707802, 0.10615285641402006, 0.10574538955762983, 0.10466712341420352, 0.10332976871430874, 0.1026559958267957, 0.13313066715598107, 0.10654116541743279, 0.1043151677839458, 0.10332270427271724]
training_time_before = [8.848922729492188, 8.53017544746399, 8.326505422592163, 8.308783769607544, 8.269590616226196, 8.109048843383789, 8.253966569900513, 8.227148294448853, 8.308701038360596, 8.461130142211914, 8.258894443511963, 8.154496192932129, 8.383468627929688, 7.966039180755615, 8.506554126739502, 8.317124605178833, 8.304079532623291, 8.319751739501953, 8.288208246231079, 8.476624965667725, 5.6144797801971436, 4.287262439727783, 7.157831430435181, 8.36973261833191, 8.460471630096436, 8.540520906448364, 8.269471406936646, 8.308367013931274, 8.46341872215271, 8.199565649032593, 8.328048467636108, 8.265151262283325, 8.209861040115356, 8.521732807159424, 8.366976022720337, 8.234574317932129, 8.221586227416992, 8.132803440093994, 8.468268871307373, 5.059279918670654, 4.4442126750946045, 4.63223671913147, 8.418288230895996, 8.536780834197998, 8.706920385360718, 8.343920946121216, 8.348418712615967, 8.554443836212158, 4.600202560424805, 4.335626125335693, 4.349453687667847, 4.370345115661621, 4.443726301193237, 4.271919250488281, 4.481655836105347, 4.436574697494507, 4.2341015338897705, 4.487683296203613, 4.3778862953186035, 4.690992832183838, 4.254532814025879, 4.351763486862183, 4.291151285171509, 4.365884065628052, 4.347700595855713, 4.291758060455322, 4.203256130218506, 4.241550445556641, 4.290205955505371, 4.204314470291138, 4.011720418930054, 4.318954944610596, 4.454340934753418, 4.388235807418823, 4.5119054317474365, 4.2748613357543945, 4.249257802963257, 4.433521270751953, 4.554076194763184, 4.297217607498169, 4.414740085601807, 4.271479845046997, 4.28632926940918, 4.30593204498291, 4.401522159576416, 4.095457315444946, 4.396210670471191, 4.440981149673462, 4.396554470062256, 4.990978240966797, 8.25033950805664, 8.288615703582764, 8.341302394866943, 8.214882612228394, 8.538604259490967, 8.454602241516113, 8.216909885406494, 8.435765981674194, 8.518853902816772, 8.60648798942566]
cpu_usage_before = [31.69375, 34.2875, 33.28125, 34.1625, 32.7, 32.39375, 33.025, 33.0, 33.76875, 34.5875, 34.225, 33.8625, 32.54375, 32.6, 32.65, 33.5, 33.475, 32.9875, 33.91875, 33.3125, 29.44375, 24.2, 33.16875, 33.3, 33.04375, 33.73125, 34.00625, 33.03125, 34.30625, 32.91875, 33.39375, 33.55, 32.9, 33.5, 33.35, 33.7875, 32.58125, 32.5, 33.95625, 24.4375, 20.50625, 23.41875, 32.725, 32.56875, 33.2375, 32.38125, 33.18125, 32.725, 26.275, 34.09375, 34.7125, 35.55625, 36.55625, 33.71875, 35.36875, 34.325, 33.35, 33.5125, 34.73125, 32.69375, 33.925, 27.68125, 31.68125, 31.3125, 22.575, 23.475, 27.625, 30.21875, 29.7875, 29.275, 28.40625, 29.5, 24.78125, 23.75, 23.14375, 28.23125, 26.45, 22.4875, 23.00625, 27.20625, 30.60625, 27.05625, 29.4875, 31.3, 32.15625, 28.0375, 26.2375, 23.06875, 21.10625, 23.41875, 33.15625, 32.78125, 32.0, 33.6, 33.85, 34.1, 33.975, 33.325, 33.65625, 33.4875]
memory_usage_before = [1053.22265625, 1054.03125, 1054.0546875, 1054.1171875, 1054.1171875, 1054.31640625, 1054.31640625, 1054.31640625, 1054.31640625, 1054.57421875, 1054.57421875, 1054.57421875, 1054.57421875, 1054.56640625, 1054.55078125, 1054.55078125, 1054.55078125, 1054.55078125, 1054.55078125, 1054.55078125, 1054.55078125, 1054.55078125, 1054.55078125, 1054.5390625, 1054.5390625, 1054.5390625, 1054.55859375, 1054.578125, 1054.57421875, 1054.57421875, 1054.57421875, 1054.57421875, 1054.57421875, 1054.57421875, 1054.57421875, 1054.5859375, 1054.5859375, 1054.5859375, 1054.5859375, 1054.5859375, 1054.5859375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.5703125, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.58984375, 1054.6015625, 1054.6015625, 1054.6015625, 1054.6015625, 1054.6015625, 1054.6015625, 1054.6015625, 1054.6015625]


# 绘制测试精度对比图
plt.figure(figsize=(10, 6))
plt.plot(test_accuracy_record_before, label='Before Deduplication')
plt.plot(test_accuracy_record_after, label='After Deduplication')
plt.xlabel('Iterations')
plt.ylabel('Test Accuracy')
plt.title('Test Accuracy Comparison Before and After Deduplication\nDeduplication Rate: {:.2f}%'.format(duplication_rate * 100))
plt.legend()
plt.show()

# 绘制损失函数对比图
plt.figure(figsize=(10, 6))
plt.plot(test_loss_record_before, label='Before Deduplication')
plt.plot(test_loss_record_after, label='After Deduplication')
plt.xlabel('Iterations')
plt.ylabel('Test Loss')
plt.title('Test Loss Comparison Before and After Deduplication\nDeduplication Rate: {:.2f}%'.format(duplication_rate * 100))
plt.legend()
plt.show()


# 绘制训练时间对比图
plt.figure(figsize=(10, 6))
plt.plot(training_time_before, label='Before Deduplication')
plt.plot(training_time_after, label='After Deduplication')
plt.xlabel('Iterations')
plt.ylabel('Training Time (seconds)')
plt.title('Training Time Comparison Before and After\nDeduplication Rate: {:.2f}%'.format(duplication_rate * 100))
plt.legend()
plt.show()

# 绘制CPU占用对比图
plt.figure(figsize=(10, 6))
plt.plot(cpu_usage_before, label='Before Deduplication')
plt.plot(cpu_usage_after, label='After Deduplication')
plt.xlabel('Iterations')
plt.ylabel('CPU Usage (%)')
plt.title('CPU Usage Comparison Before and After Deduplication\nDeduplication Rate: {:.2f}%'.format(duplication_rate * 100))
plt.legend()
plt.show()

# 绘制内存使用对比图
plt.figure(figsize=(10, 6))
plt.plot(memory_usage_before, label='Before Deduplication')
plt.plot(memory_usage_after, label='After Deduplication')
plt.xlabel('Iterations')
plt.ylabel('Memory Usage (MB)')
plt.title('Memory Usage Comparison Before and After Deduplication\nDeduplication Rate: {:.2f}%'.format(duplication_rate * 100))
plt.legend()
plt.show()